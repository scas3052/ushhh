import{a as c,d}from"./firebase-config-Cnk58qAC.js";/* empty css             */import{createUserWithEmailAndPassword as f,signInWithEmailAndPassword as y,GoogleAuthProvider as I,signInWithPopup as w}from"https://www.gstatic.com/firebasejs/10.11.1/firebase-auth.js";import{doc as u,setDoc as g,getDoc as b}from"https://www.gstatic.com/firebasejs/10.11.1/firebase-firestore.js";import"https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";function o(n,a,e=!1){var t=document.getElementById(a);t.style.display="block",t.innerHTML=n,t.style.opacity=1,t.style.backgroundColor=e?"var(--auth-success)":"var(--auth-error)",setTimeout(function(){t.style.opacity=0},5e3)}const v=document.getElementById("submitSignUp");v.addEventListener("click",n=>{n.preventDefault();const a=document.getElementById("rEmail").value,e=document.getElementById("rPassword").value,t=document.getElementById("fName").value,i=document.getElementById("lName").value,s=document.getElementById("mobileNumber").value;if(!/^\d{10}$/.test(s)){o("Please enter a valid 10-digit mobile number","signUpMessage");return}f(c,a,e).then(l=>{const r=l.user,h={email:a,firstName:t,lastName:i,phone:s};o("Account Created Successfully","signUpMessage",!0);const p=u(d,"users",r.uid);return g(p,h).then(()=>{setTimeout(()=>{sessionStorage.setItem("loggedInUserId",r.uid),window.location.href="homepage.html"},1e3)})}).catch(l=>{const r=l.code;r=="auth/email-already-in-use"?o("Email Address Already Exists","signUpMessage"):o(r==="auth/invalid-email"?"Please enter a valid email address":r==="auth/weak-password"?"Password should be at least 6 characters":"Unable to create account. Please try again.","signUpMessage")})});const E=document.getElementById("submitSignIn");E.addEventListener("click",n=>{n.preventDefault();const a=document.getElementById("email").value,e=document.getElementById("password").value;y(c,a,e).then(t=>{const i=t.user;o("Login successful","signInMessage",!0),setTimeout(()=>{sessionStorage.setItem("loggedInUserId",i.uid),window.location.href="homepage.html"},1e3)}).catch(t=>{const i=t.code;let s;switch(i){case"auth/invalid-email":s="Please enter a valid email address";break;case"auth/user-disabled":s="This account has been disabled";break;case"auth/user-not-found":s="No account exists with this email. Please sign up first.";break;case"auth/wrong-password":s="Incorrect password. Please try again.";break;case"auth/invalid-login-credentials":s="No account exists with this email. Please sign up first.";break;case"auth/invalid-credential":s="Invalid credentials. Please check your email and password.";break;case"auth/missing-password":s="Please enter your password";break;default:s="Login failed. Please try again."}o(s,"signInMessage")})});const P=new I,U=document.getElementById("googleSignIn");U.addEventListener("click",()=>{m("signInMessage")});const k=document.getElementById("googleSignUp");k.addEventListener("click",()=>{m("signUpMessage")});async function m(n){try{const e=(await w(c,P)).user,t=u(d,"users",e.uid);if((await b(t)).exists())o("Login successful",n,!0),setTimeout(()=>{sessionStorage.setItem("loggedInUserId",e.uid),window.location.href="homepage.html"},1e3);else{const s=e.displayName?e.displayName.split(" "):["User",""],l={email:e.email,firstName:s[0],lastName:s.slice(1).join(" "),photoURL:e.photoURL||null};await g(t,l),o("Account Created Successfully",n,!0),sessionStorage.setItem("loggedInUserId",e.uid),sessionStorage.setItem("needsMobileNumber","true"),setTimeout(()=>{window.location.href="profile.html"},1e3)}}catch(a){console.error("Google auth error:",a);let e="Authentication failed. Please try again.";a.code==="auth/popup-closed-by-user"?e="Sign in was cancelled.":a.code==="auth/popup-blocked"&&(e="Pop-up was blocked by your browser. Please allow pop-ups for this site."),o(e,n)}}
